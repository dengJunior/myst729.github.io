<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>一个平庸的码农 | Chrome 39 新功能</title>
    <meta name="description" content="一个平庸的码农">
    <link rel="icon" href="/static/logo.png" type="image/png" sizes="256x256">
  <link rel="icon" href="/static/logo.svg" type="image/svg+xml" sizes="any">
  <link rel="stylesheet" href="/static/fontello.css">
    
    <link rel="preload" href="/assets/css/0.styles.ea168385.css" as="style"><link rel="preload" href="/assets/js/app.d4ce6780.js" as="script"><link rel="preload" href="/assets/js/19.018a17cd.js" as="script"><link rel="prefetch" href="/assets/js/28.ab8ea044.js"><link rel="prefetch" href="/assets/js/1.460b6d99.js"><link rel="prefetch" href="/assets/js/2.4585c69e.js"><link rel="prefetch" href="/assets/js/3.560fc6c4.js"><link rel="prefetch" href="/assets/js/4.b8e26cb0.js"><link rel="prefetch" href="/assets/js/5.a4031868.js"><link rel="prefetch" href="/assets/js/6.9508ab9a.js"><link rel="prefetch" href="/assets/js/7.fa73cd7e.js"><link rel="prefetch" href="/assets/js/8.de02dda4.js"><link rel="prefetch" href="/assets/js/9.4f05d119.js"><link rel="prefetch" href="/assets/js/10.ee35eaa0.js"><link rel="prefetch" href="/assets/js/11.2af52383.js"><link rel="prefetch" href="/assets/js/12.9cd5fd43.js"><link rel="prefetch" href="/assets/js/13.dfe3a00b.js"><link rel="prefetch" href="/assets/js/14.3476e7ae.js"><link rel="prefetch" href="/assets/js/15.e4be0105.js"><link rel="prefetch" href="/assets/js/16.5ea9c46d.js"><link rel="prefetch" href="/assets/js/17.b80775b3.js"><link rel="prefetch" href="/assets/js/18.d7b44c49.js"><link rel="prefetch" href="/assets/js/20.e7784bab.js"><link rel="prefetch" href="/assets/js/21.20740583.js"><link rel="prefetch" href="/assets/js/22.efb6ef79.js"><link rel="prefetch" href="/assets/js/23.b4bd3298.js"><link rel="prefetch" href="/assets/js/24.d5547775.js"><link rel="prefetch" href="/assets/js/25.46c855ac.js"><link rel="prefetch" href="/assets/js/26.d85c22d8.js"><link rel="prefetch" href="/assets/js/27.96361ded.js"><link rel="prefetch" href="/assets/js/29.2085f5ec.js"><link rel="prefetch" href="/assets/js/30.4f6ac586.js"><link rel="prefetch" href="/assets/js/31.57541ec8.js"><link rel="prefetch" href="/assets/js/32.dee6b356.js"><link rel="prefetch" href="/assets/js/33.72192c86.js"><link rel="prefetch" href="/assets/js/34.d1d397ef.js"><link rel="prefetch" href="/assets/js/35.131246cc.js"><link rel="prefetch" href="/assets/js/36.c62769a3.js"><link rel="prefetch" href="/assets/js/37.dbb122e4.js"><link rel="prefetch" href="/assets/js/38.2f4b3c78.js"><link rel="prefetch" href="/assets/js/39.25d82b38.js"><link rel="prefetch" href="/assets/js/40.f02cae42.js"><link rel="prefetch" href="/assets/js/41.85ab936e.js"><link rel="prefetch" href="/assets/js/42.1f378e94.js"><link rel="prefetch" href="/assets/js/43.d5c77d52.js"><link rel="prefetch" href="/assets/js/44.2f53e3cf.js"><link rel="prefetch" href="/assets/js/45.e8c2e103.js"><link rel="prefetch" href="/assets/js/46.42dd2bbd.js"><link rel="prefetch" href="/assets/js/47.600ab990.js"><link rel="prefetch" href="/assets/js/48.78c3d5fd.js"><link rel="prefetch" href="/assets/js/49.9fba5340.js"><link rel="prefetch" href="/assets/js/50.e2483df2.js"><link rel="prefetch" href="/assets/js/51.1ce8a129.js"><link rel="prefetch" href="/assets/js/52.d711cd4e.js"><link rel="prefetch" href="/assets/js/53.c7803802.js"><link rel="prefetch" href="/assets/js/54.bae792ff.js"><link rel="prefetch" href="/assets/js/55.7feea50b.js"><link rel="prefetch" href="/assets/js/56.2f16289f.js">
    <link rel="stylesheet" href="/assets/css/0.styles.ea168385.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/" class="home-link router-link-active"><!----><span class="site-name">
      一个平庸的码农
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><nav class="nav-links can-hide"><div class="nav-item"><a href="/posts/" class="nav-link router-link-active">吹水</a></div><div class="nav-item"><a href="/books/" class="nav-link">图书</a></div><div class="nav-item"><a href="/projects/" class="nav-link">小玩意</a></div><div class="nav-item"><a href="/slides/" class="nav-link">投影片</a></div><div class="nav-item"><a href="/music/" class="nav-link">音乐</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">社区</span><span class="arrow right"></span></a><ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----><a href="https://github.com/myst729" target="_blank" rel="noopener noreferrer" class="nav-link">GitHub</a></li><li class="dropdown-item"><!----><a href="https://stackoverflow.com/users/1032492" target="_blank" rel="noopener noreferrer" class="nav-link">StackOverflow</a></li></ul></div></div><!----></nav></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/posts/" class="nav-link router-link-active">吹水</a></div><div class="nav-item"><a href="/books/" class="nav-link">图书</a></div><div class="nav-item"><a href="/projects/" class="nav-link">小玩意</a></div><div class="nav-item"><a href="/slides/" class="nav-link">投影片</a></div><div class="nav-item"><a href="/music/" class="nav-link">音乐</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">社区</span><span class="arrow right"></span></a><ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----><a href="https://github.com/myst729" target="_blank" rel="noopener noreferrer" class="nav-link">GitHub</a></li><li class="dropdown-item"><!----><a href="https://stackoverflow.com/users/1032492" target="_blank" rel="noopener noreferrer" class="nav-link">StackOverflow</a></li></ul></div></div><!----></nav><!----></div><div class="page"><div class="content"><h1 id="chrome-39-新功能"><a href="#chrome-39-新功能" aria-hidden="true" class="header-anchor">#</a> Chrome 39 新功能</h1><blockquote><p>本文翻译自 <a href="http://www.sitepoint.com/whats-new-chrome-39/" target="_blank" rel="noopener noreferrer">What’s New in Chrome 39</a>，经 <a href="http://weibo.com/itchina100" target="_blank" rel="noopener noreferrer">@裕波</a> 大大授意，发布于 <a href="http://www.w3ctech.com/topic/652" target="_blank" rel="noopener noreferrer">w3ctech</a>。</p></blockquote><p>尽管已步入第六个年头，Chrome 的版本号仍然大踏步的向中年迈进。Chrome 39 已经发布，说不定你都装上了。它有一些很好的新功能，以及一两处令人生疑的改动。</p><h2 id="ecmascript-6-生成器"><a href="#ecmascript-6-生成器" aria-hidden="true" class="header-anchor">#</a> ECMAScript 6 生成器</h2><p>生成器是以 <code>function*</code> 声明，能生成迭代器的特殊函数。迭代器是一个对象，它具有 <code>next()</code> 方法，在调用时会返回一个值。生成器函数使用 <code>yield</code> 语句向序列提供下一个值。</p><p>Arunoda Susiripala 在<a href="http://www.sitepoint.com/javascript-generators-preventing-callback-hell/" target="_blank" rel="noopener noreferrer">《JavaScript 生成器和防止回调地狱》</a>中给出了一个基本的示例：</p><pre class="language-js"><code><span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">HelloGen</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">yield</span> <span class="token number">100</span><span class="token punctuation">;</span>
    <span class="token keyword">yield</span> <span class="token number">400</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> gen <span class="token operator">=</span> <span class="token function">HelloGen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>gen<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {value: 100, done: false}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>gen<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {value: 400, done: false}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>gen<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {value: undefined, done: true}</span>
</code></pre><p>Chrome、Opera 和 Firefox 31 以上版本均支持 ECMAScript 6 生成器。</p><h2 id="信标-api"><a href="#信标-api" aria-hidden="true" class="header-anchor">#</a> 信标 API</h2><p>新的<a href="http://www.w3.org/TR/beacon/" target="_blank" rel="noopener noreferrer">信标 API</a> 使得你能够在无需等待回应的情况下向服务器发送数据。请求由浏览器排队，尽可能快的发送。然而——重要的是——它并不会对释放当前页面或加载下一页面造成延迟。</p><p><code>navigator.sendBeacon()</code> 可传入 URL 和数据——可能是字符串或表单数据值。通常它可以用来传输统计信息，比如：</p><pre class="language-js"><code>navigator<span class="token punctuation">.</span><span class="token function">sendBeacon</span><span class="token punctuation">(</span><span class="token string">'/log'</span><span class="token punctuation">,</span> <span class="token string">'page-unloaded'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>如果浏览器排列信标请求队列成功，该方法会返回 <code>true</code>。我不知道返回 <code>false</code> 时你能做什么，但信标不应用于基本的功能或消息。</p><p>Chrome、Opera 和 Firefox 31 以上版本均支持信标 API。</p><h2 id="web-动画控制"><a href="#web-动画控制" aria-hidden="true" class="header-anchor">#</a> Web 动画控制</h2><p>Chrome 36 引入了 <a href="http://w3c.github.io/web-animations/" target="_blank" rel="noopener noreferrer">Web 动画</a>。这能让 JavaScript 完成类似 CSS3 的关键帧和动画声明，比如：</p><pre class="language-js"><code><span class="token keyword">var</span> myanimation <span class="token operator">=</span> myelement<span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span> color<span class="token punctuation">:</span> <span class="token string">&quot;#f00&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> left<span class="token punctuation">:</span> <span class="token string">&quot;20em&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> transform<span class="token punctuation">:</span> <span class="token string">&quot;rotate(180deg)&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    duration<span class="token punctuation">:</span> <span class="token number">1000</span><span class="token punctuation">,</span>
    iterations<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    delay<span class="token punctuation">:</span> <span class="token number">0</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>它的优点是你可以根据用户输入或其他条件控制和同步播放。Chrome 39 增加了 <code>play()</code>、<code>pause()</code>、<code>reverse()</code>、<code>finish()</code>（把动画置为最终状态）和 <code>cancel()</code>（清除全部效果）等播放方法。</p><p>可以把 Web 动画看成是简单的 CSS3 动画与使用 <code>requestAnimationFrame</code> 和自定义时序函数的复杂 JavaScript 全帧控制之间的一种折衷。这对于一般的网页效果可能是绰绰有余，但对游戏来说还不够强大。应用程序和演示可能是很好的用例？</p><p>目前仅 Chrome 和 Opera 支持 Web 动画。Firefox 每夜构建版本也提供支持，并且<a href="https://github.com/web-animations/web-animations-js" target="_blank" rel="noopener noreferrer">有 polyfill 可用</a>，但技术暂时还不稳定。</p><h2 id="web-应用程序清单"><a href="#web-应用程序清单" aria-hidden="true" class="header-anchor">#</a> Web 应用程序清单</h2><p>别跟<a href="http://www.sitepoint.com/offline-browsing-in-html5-with-applicationcache/" target="_blank" rel="noopener noreferrer">应用程序缓存清单</a>搞混了，<a href="http://w3c.github.io/manifest/" target="_blank" rel="noopener noreferrer">Web 应用程序清单</a>是一个可以存放名称、起始地址、图标、显示模式、方向等元数据的 JSON 文件。</p><p>你会在 HTML 的 <code>head</code> 中引入一个 <code>link</code>：</p><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>manifest<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>manifest.json<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre><p>清单文件的内容大概是这样的：</p><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;My Application&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;icons&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
        <span class="token property">&quot;src&quot;</span><span class="token operator">:</span> <span class="token string">&quot;icon/lowres&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;sizes&quot;</span><span class="token operator">:</span> <span class="token string">&quot;64x64&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;src&quot;</span><span class="token operator">:</span> <span class="token string">&quot;icon/small&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;sizes&quot;</span><span class="token operator">:</span> <span class="token string">&quot;64x64&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;src&quot;</span><span class="token operator">:</span> <span class="token string">&quot;icon/hd_hi&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;sizes&quot;</span><span class="token operator">:</span> <span class="token string">&quot;128x128&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;density&quot;</span><span class="token operator">:</span> <span class="token number">2</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;start_url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/index.html&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;display&quot;</span><span class="token operator">:</span> <span class="token string">&quot;fullscreen&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;orientation&quot;</span><span class="token operator">:</span> <span class="token string">&quot;landscape&quot;</span>
<span class="token punctuation">}</span>
</code></pre><p>这意味着最终我们可以移除所有页面顶部的 57x57 的 iOS 图标……<strong>假设苹果决定在 Safari 中实现这项技术！</strong></p><p>跨浏览器的支持尚不完整。Firefox 在其 Marketplace 中使用了清单，但属性名似乎有所不同。</p><h2 id="windows-7-沉浸模式"><a href="#windows-7-沉浸模式" aria-hidden="true" class="header-anchor">#</a> Windows 7 沉浸模式</h2><p>Windows 7 切换到沉浸模式能让 Chrome 表现得像一个 Windows 8 全屏 Metro 应用程序。诡异的是，之后它会在 Windows 任务栏上再放一个像 Chrome OS 一样的半透明任务栏——有自己的开始按钮和时钟。</p><p>**为什么？**如果 Windows 7 用户想要体验 Windows 8，他们可以升级。然而，很多 Windows 7 用户都有选择坚守的理由：他们不想要 Windows 8！</p><p>对于 Google 坚持往其他操作系统里偷偷插入 Chrome OS 组件的做法，我也很困惑。到处都是 Chrome 应用程序图标也没什么——但照搬原生功能毫无意义。也许他们是希望引导人们使用 Chrome OS，但是骚扰只会适得其反。</p><h2 id="杂项更新"><a href="#杂项更新" aria-hidden="true" class="header-anchor">#</a> 杂项更新</h2><p>更多次要功能……</p><ul><li>无需登入也可以从 Play 商店安装免费的 Chrome 应用程序了；</li><li>在高 DPI 和视网膜屏幕上，<code>scrollTop</code> 和 <code>scrollLeft</code> 现在可返回分数像素。如果你认为像素完美是件坏事，那就等到客户提出子像素完美的要求再说吧！</li><li>现在可以编辑已保存密码了；</li><li>对 Mac OS 只提供 64 位版本的 Chrome；</li><li>SHA-1 加密被替换为 SHA-2；</li><li>增加了对菜单中的扩展按钮图标的实验性支持（在 <strong>about:flags</strong> 中设置<strong>启用扩展程序工具栏重新设计功能</strong>）。</li></ul><p>尽管有一点夹带私货，以及受到 Firefox 的追赶，39 还一次重大的更新。Chrome 仍然很快，很稳定，占据了浏览器市场的半壁江山。推荐。</p></div><!----><!----></div></div></div>
    <script src="/assets/js/19.018a17cd.js" defer></script><script src="/assets/js/app.d4ce6780.js" defer></script>
  </body>
</html>
