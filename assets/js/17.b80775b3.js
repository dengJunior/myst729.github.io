(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{72:function(t,s,n){"use strict";n.r(s);var a=n(0),e=Object(a.a)({},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"content"},[t._m(0),n("blockquote",[n("p",[t._v("本文翻译自 "),n("a",{attrs:{href:"http://webcomponents.org/articles/introduction-to-custom-elements/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Introduction to Custom Elements")]),t._v("，经 "),n("a",{attrs:{href:"http://weibo.com/itchina100",target:"_blank",rel:"noopener noreferrer"}},[t._v("@裕波")]),t._v(" 大大授意，发布于 "),n("a",{attrs:{href:"http://www.w3ctech.com/topic/867",target:"_blank",rel:"noopener noreferrer"}},[t._v("w3ctech")]),t._v("。本文篇幅较短，并未涵盖自定义元素全部的内容。了解更多细节，可以阅读我之前翻译的另一篇文章"),n("router-link",{attrs:{to:"/posts/2013/custom-elements-defining-new-elements-in-html.html"}},[t._v("《自定义元素：在 HTML 中定义新元素》")]),t._v("。")],1)]),t._m(1),t._m(2),t._m(3),n("p",[t._v("自定义元素能让开发者创建自定义的 HTML 标签，并用于他们的网站和应用程序，使得组件复用变得更容易。")]),t._m(4),t._m(5),t._m(6),t._m(7),t._m(8),t._m(9),t._m(10),t._m(11),t._m(12),t._m(13),n("p",[t._v("好的命名")]),t._m(14),n("p",[t._v("不好的命名")]),t._m(15),t._m(16),t._m(17),t._m(18),t._m(19),t._m(20),t._m(21),t._m(22),n("p",[t._v("能够使用自定义的标签名挺不错，但这还不够。我们再给这个元素加一些特性。")]),t._m(23),t._m(24),t._m(25),t._m(26),t._m(27),t._m(28),t._m(29),t._m(30),n("p",[t._v("要定义一个类型扩展：")]),t._m(31),t._m(32),t._m(33),t._m(34),t._m(35),t._m(36),n("p",[t._v("类型扩展自定义元素的目的是什么？我们来看看 GitHub 这个现成的绝佳例子。")]),t._m(37),t._m(38),n("p",[t._v("看看它怎么工作的。")]),t._m(39),n("p",[t._v("有四件事需要注意：")]),t._m(40),t._m(41),t._m(42),t._m(43),t._m(44),t._m(45),n("p",[t._v("下面列出了这些声明周期回调方法：")]),t._m(46),t._m(47),t._m(48),n("p",[t._v("要使用生命周期回调方法，只要在注册自定义元素时，把函数定义成原型对象的属性。")]),t._m(49),t._m(50),n("p",[t._v("在自定义元素中使用模板和 Shadow DOM，可以让组件的操控和复用更容易。有了模板，就能声明式地定义你的自定义元素的内容。有了 Shadow DOM，内容的样式、ID 和类就能以其自身为作用域。")]),t._m(51),t._m(52),t._m(53),t._m(54),t._m(55),t._m(56),t._m(57),t._m(58),t._m(59),t._m(60),t._m(61),n("p",[t._v("如果你有兴趣了解更多自定义元素的知识，请参阅：")]),n("ul",[n("li",[n("a",{attrs:{href:"http://www.html5rocks.com/en/tutorials/webcomponents/customelements/",target:"_blank",rel:"noopener noreferrer"}},[t._v("自定义元素：在 HTML 中定义新元素 - HTML5Rocks")]),t._v("（"),n("a",{attrs:{href:"http://www.html5rocks.com/zh/tutorials/webcomponents/customelements/",target:"_blank",rel:"noopener noreferrer"}},[t._v("译文 1")]),t._v("、"),n("router-link",{attrs:{to:"/posts/2013/custom-elements-defining-new-elements-in-html.html"}},[t._v("译文 2")]),t._v("）")],1),t._m(62)])])},[function(){var t=this.$createElement,s=this._self._c||t;return s("h1",{attrs:{id:"自定义元素简介"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#自定义元素简介","aria-hidden":"true"}},[this._v("#")]),this._v(" 自定义元素简介")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("HTML 是 Web 平台最重要的元素。它提供了各种构造站点和应用程序的底层特性。但是，一旦你开始用原生 HTML 标签实现一个复杂的组件，很容易就会变成 "),s("code",[this._v("div")]),this._v(" 标签的堆砌。假如 Web 平台允许你创建自己的原始组件会怎样？假如你可以随意选择标签名会怎样？加入你可以扩展已有 HTML 标签的特性会怎样？自定义元素（Custom Elements）就允许你做这些事情。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("video",{attrs:{src:"https://myst729.github.io/blog/media/2015/eiji-kitamura-web-components-custom-elements.mp4",poster:"https://myst729.github.io/blog/images/2015/03/customelements-cover.jpg",preload:"metadata",controls:""}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"什么是自定义元素？"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#什么是自定义元素？","aria-hidden":"true"}},[this._v("#")]),this._v(" 什么是自定义元素？")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"如何构建一个自定义元素"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#如何构建一个自定义元素","aria-hidden":"true"}},[this._v("#")]),this._v(" 如何构建一个自定义元素")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("定义一个自定义元素很简单。只要以标签名为第一个参数，调用 "),s("code",[this._v("document.registerElement()")]),this._v("。")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" XComponent "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("registerElement")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v("'x-component'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("现在你就可以在文档中任何地方使用 "),s("code",[this._v("<x-component>")]),this._v(" 了。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[this._v("<")]),this._v("x-component")]),s("span",{attrs:{class:"token punctuation"}},[this._v(">")])]),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[this._v("</")]),this._v("x-component")]),s("span",{attrs:{class:"token punctuation"}},[this._v(">")])]),this._v("\n")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("提示："),s("code",[this._v("<x-component>")]),this._v(" 在文档中的位置可以位于自定义元素的定义执行之前。细节请参阅 "),s("a",{attrs:{href:"http://www.html5rocks.com/en/tutorials/webcomponents/customelements/",target:"_blank",rel:"noopener noreferrer"}},[this._v("HTML5Rocks 的这篇文章")]),this._v("。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("要检测自定义元素是否可用，可以检查 "),s("code",[this._v("document.registerElement")]),this._v(" 是否存在。或者你可以直接加载 "),s("a",{attrs:{href:"http://webcomponents.org/polyfills/",target:"_blank",rel:"noopener noreferrer"}},[s("code",[this._v("webcomponents.js")])]),this._v("。")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("pre",{pre:!0,attrs:{class:"language-html"}},[n("code",[n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),n("span",{attrs:{class:"token attr-name"}},[t._v("src")]),n("span",{attrs:{class:"token attr-value"}},[n("span",{attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("bower_components/webcomponentsjs/webcomponents.min.js"),n("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{attrs:{class:"token script language-javascript"}}),n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),n("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"命名规则"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#命名规则","aria-hidden":"true"}},[this._v("#")]),this._v(" 命名规则")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("你的自定义元素的名字当中必须至少有一个“"),s("code",[this._v("-")]),this._v("”。任何不含“"),s("code",[this._v("-")]),this._v("”的标签名都会导致错误。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("x-component")]),s("li",[this._v("x-web-component")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("web_component")]),s("li",[this._v("xelement")]),s("li",[this._v("XElement")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"命令式用法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#命令式用法","aria-hidden":"true"}},[this._v("#")]),this._v(" 命令式用法")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("通过向 HTML 插入 "),s("code",[this._v("<x-component>")]),this._v(" 标签，可以声明式的使用定义好的自定义标签，但你也可以采用命令的用法。")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" XComponent "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("registerElement")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v("'x-component'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" dom "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{attrs:{class:"token class-name"}},[t._v("XComponent")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ndocument"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("appendChild")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dom"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("上面的例子就使用 "),s("code",[this._v("new")]),this._v(" 实例化了一个自定义元素。")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("document"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("registerElement")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v("'x-component'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" dom "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("createElement")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v("'x-component'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ndocument"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("appendChild")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dom"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("这个例子使用 "),s("code",[this._v("document.createElement()")]),this._v(" 实例化了一个自定义元素。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"向自定义元素添加特性"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#向自定义元素添加特性","aria-hidden":"true"}},[this._v("#")]),this._v(" 向自定义元素添加特性")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("为了给自定义元素增加特性，你首先需要以 "),s("code",[this._v("HTMLElement.prototype")]),this._v(" 为参数调用 "),s("code",[this._v("Object.create()")]),this._v("，创建一个基本的原型对象。你会得到一个空的原型对象，其原型链上已经设置了基本的 HTML 元素特性。向这个原型对象添加任何你想要的方法和属性，然后把这个原型传入 "),s("code",[this._v("document.registerElement")]),this._v("，如下所示：")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" proto "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Object"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("create")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("HTMLElement"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nproto"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'自定义元素'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nproto"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function-variable function"}},[t._v("alert")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("function")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{attrs:{class:"token function"}},[t._v("alert")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v("'我是'")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("this")]),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ndocument"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("registerElement")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v("'x-component'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  prototype"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" proto\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"自定义元素结构"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#自定义元素结构","aria-hidden":"true"}},[this._v("#")]),this._v(" 自定义元素结构")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("p",[t._v("我们用 Chrome 开发者工具来看看自定义元素里面都是什么。在“元素”面板观察我们刚创建的 "),n("code",[t._v("x-component")]),t._v(" 标签。你可以看到 "),n("code",[t._v("x-component")]),t._v(" 是一个 "),n("code",[t._v("x-component")]),t._v(" 原型的实例，而后者又是 "),n("code",[t._v("HTMLElement")]),t._v(" 原型的实例。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:"https://myst729.github.io/blog/images/2015/03/customelements-inherit.png",alt:"自定义元素结构"}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"类型扩展自定义元素"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#类型扩展自定义元素","aria-hidden":"true"}},[this._v("#")]),this._v(" 类型扩展自定义元素")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("你可以创建一个扩展原生 HTML 元素特性的自定义的元素。这就是所谓的类型扩展自定义元素。要使用这个元素，可以在原始的标签上用 "),s("code",[this._v("is")]),this._v(" 属性指定自定义的标签名称。")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("pre",{pre:!0,attrs:{class:"language-html"}},[n("code",[n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),n("span",{attrs:{class:"token attr-name"}},[t._v("is")]),n("span",{attrs:{class:"token attr-value"}},[n("span",{attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("x-component"),n("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),n("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ul",[n("li",[t._v("使用要扩展元素的原型创建基本原型对象，而不是 "),n("code",[t._v("HTMLElement")]),t._v("。")]),n("li",[t._v("在 "),n("code",[t._v("document.registerElement()")]),t._v(" 的第二个参数中添加一个 "),n("code",[t._v("extends")]),t._v(" 属性，指定要扩展元素的标签名称。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("下面是一段扩展 "),s("code",[this._v("input")]),this._v(" 元素的示例代码：")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" XComponent "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("registerElement")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v("'x-component'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{attrs:{class:"token keyword"}},[t._v("extends")]),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'input'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  prototype"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Object"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("create")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("HTMLInputElement"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("p",[t._v("注意 "),n("code",[t._v("extends: 'input'")]),t._v("，它的原型是基于 "),n("code",[t._v("HTMLInputElement")]),t._v("，而不是 "),n("code",[t._v("HTMLElement")]),t._v("。现在你可以在文档中使用 "),n("code",[t._v('<input is="x-component">')]),t._v(" 了。这样，你就能在基本的 "),n("code",[t._v("input")]),t._v(" 元素特性上扩展 API。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("提示：你可能会好奇，假如为“"),s("code",[this._v("extends")]),this._v("”和“"),s("code",[this._v("prototype")]),this._v("”设置不同的元素，会发生什么。没错，有这个可能，还可能会导致意外的结果。但根据我的经验，不会有什么有价值的东西。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"github-的用例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#github-的用例","aria-hidden":"true"}},[this._v("#")]),this._v(" GitHub 的用例")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:"https://myst729.github.io/blog/images/2015/03/customelements-relativetime.png",alt:"实时类型扩展"}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("GitHub 有很多显示日期和时间的组件。注意，它们不是绝对的日期和世界，而是相对于浏览器的当前时间。你应该能想象如何计算，但 GitHub 却用类型扩展自定义元素 "),s("code",[this._v("time-elements")]),this._v(" 来做这件事。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:"https://myst729.github.io/blog/images/2015/03/customelements-time.png",alt:"time 元素"}})])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ul",[n("li",[n("code",[t._v("time")]),t._v(" 标签被当作基本元素使用")]),n("li",[n("code",[t._v("datetime")]),t._v(" 属性表示了绝对的日期和时间")]),n("li",[n("code",[t._v("relative-time")]),t._v(" 被指定为一个类型扩展")]),n("li",[n("code",[t._v("TextContent")]),t._v(" 表示了相对的日期和时间")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("作为一个类型扩展，这是实时地从绝对日期和时间（"),s("code",[this._v("datetime")]),this._v("）属性计算出相对日期和时间。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("使用类型扩展自定义元素的好处在于，即使浏览器未开启 JavaScript，或者不支持自定义元素（以及补丁），"),s("code",[this._v("time")]),this._v(" 元素仍会显示备用的日期和时间信息，保持了它的语义。试试用开发者工具关闭 JavaScript；你会发现它显示的是绝对的日期和时间。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("关于 "),s("code",[this._v("time-elements")]),this._v(" 更多细节，请阅读 webcomponents.org 的文章 "),s("a",{attrs:{href:"http://webcomponents.org/articles/interview-with-joshua-peek/",target:"_blank",rel:"noopener noreferrer"}},[this._v("GitHub 在生产中如何使用 Web Components")]),this._v("。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"生命周期回调方法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#生命周期回调方法","aria-hidden":"true"}},[this._v("#")]),this._v(" 生命周期回调方法")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("前面提到的 "),s("code",[this._v("relative-time")]),this._v(" 自定义元素向 "),s("code",[this._v("TextContent")]),this._v(" 实时地插入相对的日期和时间信息。但这是什么时候发生的？你可以定义一些在自定义元素产生特定事件时调用，被称为“生命周期回调方法”的函数。")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ul",[n("li",[t._v("元素创建后调用 "),n("code",[t._v(".createdCallback()")]),t._v("；")]),n("li",[t._v("元素附加到文档后调用 "),n("code",[t._v(".attachedCallback()")]),t._v("；")]),n("li",[t._v("从文档中移除元素后调用 "),n("code",[t._v(".detachedCallback()")]),t._v("；")]),n("li",[t._v("元素任一属性变更后调用 "),n("code",[t._v(".attributeChangedCallback()")]),t._v("。")])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("p",[t._v("在 "),n("code",[t._v("relative-time")]),t._v(" 的例子中，就用了 "),n("code",[t._v(".createdCallback()")]),t._v(" 和 "),n("code",[t._v(".attributeChangedCallback()")]),t._v(" 向 "),n("code",[t._v("TextContent")]),t._v(" 插入相对的日期和时间。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"示例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#示例","aria-hidden":"true"}},[this._v("#")]),this._v(" 示例")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" proto "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Object"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("create")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("HTMLElement"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nproto"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function-variable function"}},[t._v("createdCallback")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("function")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" div "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("createElement")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v("'div'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  div"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("textContent "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'我是自定义元素'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{attrs:{class:"token keyword"}},[t._v("this")]),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("appendChild")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("div"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" XComponent "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("registerElement")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v("'x-component'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  prototype"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" proto\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"自定义元素与模板和-shadow-dom-结合"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#自定义元素与模板和-shadow-dom-结合","aria-hidden":"true"}},[this._v("#")]),this._v(" 自定义元素与模板和 Shadow DOM 结合")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("创建自定义元素时，你可以通过 "),s("code",[this._v(".createdCallback()")]),this._v(" 来应用它们。我们来看一段示例代码。要学习模板和 Shadow DOM，请阅读之前的相关文章（"),s("a",{attrs:{href:"http://webcomponents.org/articles/introduction-to-template-element",target:"_blank",rel:"noopener noreferrer"}},[this._v("模板")]),this._v("、"),s("a",{attrs:{href:"http://webcomponents.org/articles/introduction-to-shadow-dom",target:"_blank",rel:"noopener noreferrer"}},[this._v("Shadow DOM")]),this._v("）。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("HTML")])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("pre",{pre:!0,attrs:{class:"language-html"}},[n("code",[n("span",{attrs:{class:"token comment"}},[t._v("\x3c!-- 定义模板 --\x3e")]),t._v("\n"),n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("template")]),t._v(" "),n("span",{attrs:{class:"token attr-name"}},[t._v("id")]),n("span",{attrs:{class:"token attr-value"}},[n("span",{attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("template"),n("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("style")]),n("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{attrs:{class:"token style language-css"}},[t._v("\n    ...\n  ")]),n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("style")]),n("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),n("span",{attrs:{class:"token attr-name"}},[t._v("id")]),n("span",{attrs:{class:"token attr-value"}},[n("span",{attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("container"),n("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("img")]),t._v(" "),n("span",{attrs:{class:"token attr-name"}},[t._v("src")]),n("span",{attrs:{class:"token attr-value"}},[n("span",{attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("http://webcomponents.org/img/logo.svg"),n("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("content")]),t._v(" "),n("span",{attrs:{class:"token attr-name"}},[t._v("select")]),n("span",{attrs:{class:"token attr-value"}},[n("span",{attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("h1"),n("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("content")]),n("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),n("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("template")]),n("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("pre",{pre:!0,attrs:{class:"language-html"}},[n("code",[n("span",{attrs:{class:"token comment"}},[t._v("\x3c!-- 使用自定义元素 --\x3e")]),t._v("\n"),n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("x-component")]),n("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("h1")]),n("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("我是自定义元素"),n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("h1")]),n("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("x-component")]),n("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("JavaScript")])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" proto "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" Object"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("create")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("HTMLElement"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nproto"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function-variable function"}},[t._v("createdCallback")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("function")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{attrs:{class:"token comment"}},[t._v("// 添加一个 Shadow DOM")]),t._v("\n  "),n("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" root "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("this")]),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("createShadowRoot")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{attrs:{class:"token comment"}},[t._v("// 添加一个模板")]),t._v("\n  "),n("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" template "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("querySelector")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v("'#template'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" clone "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("importNode")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("template"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("content"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token boolean"}},[t._v("true")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  root"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("appendChild")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("clone"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" XComponent "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("registerElement")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v("'x-component'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  prototype"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" proto\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("a",{attrs:{href:"http://jsbin.com/yugoka/3/edit?html,js,output",target:"_blank",rel:"noopener noreferrer"}},[this._v("这里还有一个例子。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"浏览器支持"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#浏览器支持","aria-hidden":"true"}},[this._v("#")]),this._v(" 浏览器支持")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("p",[t._v("Chrome 和 Opera 都支持自定义元素。2014 年 11 月起，Firefox 开启标示后也支持了。要检查其可用性，可以访问 "),n("a",{attrs:{href:"https://www.chromestatus.com/features/4642138092470272",target:"_blank",rel:"noopener noreferrer"}},[t._v("chromestatus.com")]),t._v(" 或 "),n("a",{attrs:{href:"http://caniuse.com/#feat=custom-elements",target:"_blank",rel:"noopener noreferrer"}},[t._v("caniuse.com")]),t._v("。要支持其他浏览器，可以使用 "),n("a",{attrs:{href:"http://webcomponents.org/polyfills/",target:"_blank",rel:"noopener noreferrer"}},[t._v("webcomponents.js")]),t._v("（原名 "),n("a",{attrs:{href:"https://github.com/Polymer/platform",target:"_blank",rel:"noopener noreferrer"}},[t._v("platform.js")]),t._v("）。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"资料"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#资料","aria-hidden":"true"}},[this._v("#")]),this._v(" 资料")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("自定义元素就讲到这里。"),s("a",{attrs:{href:"http://webcomponents.org/articles/interview-with-joshua-peek/",target:"_blank",rel:"noopener noreferrer"}},[this._v("你可能也注意到了")]),this._v("，GitHub 就使用了自定义元素，并借助补丁实现了对 IE9 的支持。现在就看你的了。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("li",[s("a",{attrs:{href:"http://w3c.github.io/webcomponents/spec/custom/",target:"_blank",rel:"noopener noreferrer"}},[this._v("自定义元素规范标准")])])}],!1,null,null,null);s.default=e.exports}}]);